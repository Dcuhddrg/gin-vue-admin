## 云资产管理 (Cloud Asset Management) 功能开发计划

### 第一阶段：前端模板开发（当前阶段）

#### 1. 创建前端目录结构
```
web/src/plugin/cloud_asset/
├── api/
│   └── cloudProvider.js      # 云厂商API接口
└── view/
    └── cloudProvider.vue     # 云厂商管理页面
```

#### 2. 创建API接口文件 (`web/src/plugin/cloud_asset/api/cloudProvider.js`)
- 定义云厂商相关的API接口：
  - `getCloudProviderList` - 获取云厂商列表（分页）
  - `createCloudProvider` - 创建云厂商
  - `updateCloudProvider` - 更新云厂商
  - `deleteCloudProvider` - 删除云厂商
  - `getCloudProviderById` - 根据ID获取云厂商详情

#### 3. 创建页面组件 (`web/src/plugin/cloud_asset/view/cloudProvider.vue`)
功能特性：
- **搜索区域**：按厂商名称、厂商类型筛选
- **操作按钮**：新增云厂商
- **数据表格**：
  - 列：ID、厂商名称、厂商类型、区域、状态、备注、操作
  - 操作列：编辑、删除
  - 状态列：使用Switch组件切换启用/禁用
  - AK/SK字段：脱敏显示（如 `********`）
- **新增/编辑对话框**：
  - 表单字段：厂商名称、AccessKey、SecretKey、厂商类型（下拉选择）、区域、状态、备注
  - AK/SK字段：编辑时显示脱敏，支持点击显示/隐藏
  - 表单验证：必填字段校验
- **分页组件**：支持分页查询
- **样式**：使用UnoCSS进行样式微调

#### 4. 前端技术要点
- 使用 Vue 3 Composition API (`<script setup>`)
- 使用 Element Plus 组件库
- 使用 UnoCSS 原子化CSS
- 响应式数据管理
- 加载状态和错误处理

---

### 第二阶段：后端开发（待确认后执行）

#### 1. 创建后端目录结构
```
server/plugin/cloud_asset/
├── api/
│   ├── enter.go
│   └── cloudProvider.go
├── service/
│   ├── enter.go
│   └── cloudProvider.go
├── router/
│   ├── enter.go
│   └── cloudProvider.go
├── model/
│   ├── cloudProvider.go
│   └── request/
│       └── cloudProvider.go
├── initialize/
│   ├── api.go
│   ├── gorm.go
│   ├── menu.go
│   └── router.go
└── plugin.go
```

#### 2. 数据模型设计
- `CloudProvider` 结构体：包含 ID、CreatedAt、UpdatedAt、DeletedAt（继承GVA_MODEL）、name、ak、sk、type、region、status、remark
- `CloudProviderSearch` 请求模型：分页参数 + 搜索条件

#### 3. 后端功能实现
- **Service层**：CRUD业务逻辑
- **API层**：HTTP接口处理，包含完整Swagger注释
- **Router层**：路由注册，集成JWT鉴权和Casbin权限校验
- **Initialize层**：数据库迁移、菜单初始化、API权限初始化

#### 4. 数据库迁移
- 自动创建 `cloud_providers` 表
- 字段：id, created_at, updated_at, deleted_at, name, ak, sk, type, region, status, remark

#### 5. 菜单和权限初始化
- 一级菜单：云资产管理
- 二级菜单：云厂商
- API权限：创建、查询、更新、删除

---

### 开发顺序
1. ✅ 先创建前端模板（API + 页面组件）
2. ⏳ 确认前端展示效果
3. ⏳ 开发后端功能
4. ⏳ 前后端联调测试

---

### 注意事项
- AK/SK 敏感信息需要脱敏处理
- 厂商类型使用字典管理（阿里云、腾讯云、AWS等）
- 状态字段：1=启用，2=禁用
- 遵循 GVA 框架的分层架构和代码规范